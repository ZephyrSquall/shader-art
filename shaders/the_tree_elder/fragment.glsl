#version 300 es

precision highp float;

uniform vec2        u_resolution;
uniform float       u_time;

uniform sampler2D   u_tex0;
uniform vec2        u_tex0Resolution;

uniform sampler2D   u_tex1;
uniform vec2        u_tex1Resolution;

out vec4 outColor;

#define PI 3.1415926535897932384626433832795

vec4 composite(vec4 color1, vec4 color2) {
    return vec4(color1.rgb * color1.a + color2.rgb * color2.a * (1.0 - color1.a), color1.a + color2.a * (1.0 - color1.a));
}
vec4 mask(vec4 color, float alpha) {
    return vec4(color.rgb, color.a * alpha);
}
float random(in float x) {
    return fract(sin(x) * 43758.5453);
}

// Taken from https://stackoverflow.com/questions/9234724/how-to-change-hue-of-a-texture-with-glsl
vec4 hue_shift(vec4 color, float delta) {
    const vec4  kRGBToYPrime = vec4 (0.299, 0.587, 0.114, 0.0);
    const vec4  kRGBToI     = vec4 (0.596, -0.275, -0.321, 0.0);
    const vec4  kRGBToQ     = vec4 (0.212, -0.523, 0.311, 0.0);

    const vec4  kYIQToR   = vec4 (1.0, 0.956, 0.621, 0.0);
    const vec4  kYIQToG   = vec4 (1.0, -0.272, -0.647, 0.0);
    const vec4  kYIQToB   = vec4 (1.0, -1.107, 1.704, 0.0);

    // Convert to YIQ
    float   YPrime  = dot (color, kRGBToYPrime);
    float   I      = dot (color, kRGBToI);
    float   Q      = dot (color, kRGBToQ);

    // Calculate the hue and chroma
    float   hue     = atan (Q, I);
    float   chroma  = sqrt (I * I + Q * Q);

    // Make the user's adjustments
    hue += delta;

    // Convert back to YIQ
    Q = chroma * sin (hue);
    I = chroma * cos (hue);

    // Convert back to RGB
    vec4    yIQ   = vec4 (YPrime, I, Q, 0.0);
    color.r = dot (yIQ, kYIQToR);
    color.g = dot (yIQ, kYIQToG);
    color.b = dot (yIQ, kYIQToB);

    // Save the result
    return color;
}

vec4 leaf(vec2 uv, vec2 offset, vec2 scale, float rotation, float hue_delta) {
    // Translate
    uv = uv - offset;

    // Scale
    uv.x /= scale.x;
    uv.y /= scale.y;

    // Rotate
    float x = uv.x;
    uv.x = uv.x * cos(rotation) + uv.y * sin(rotation);
    uv.y = -x * sin(rotation) + uv.y * cos(rotation);

    // Set mid-rubs
    vec4 midrib_color = vec4(0.0, 0.7, 0.0, 1.0);
    if (uv.x > 0.0) {
        midrib_color.a = max(0.0, smoothstep(-0.7, -1.0, sin(uv.y * 25.0 - 17.5 * uv.x)));
    } else {
        midrib_color.a = max(0.0, smoothstep(-0.7, -1.0, sin(uv.y * 25.0 + 17.5 * uv.x)));
    }
    midrib_color.a = min(midrib_color.a + smoothstep(0.05, 0.02, abs(uv.x)), 1.0);

    // Cut out leaf shape
    float outer_edge = exp(-pow((-0.01 * uv.y), 2.0)) - exp(-uv.y) - uv.y + 1.0;
    float alpha;
    if (uv.x > 0.0) {
        alpha = smoothstep(0.0, -0.1, uv.x - outer_edge);
    } else {
        alpha = smoothstep(0.0, -0.1, -(outer_edge + uv.x));
    }

    // Overlay colours and shift hue
    vec4 color = composite(midrib_color, vec4(0.0, 0.5, 0.0, 1.0));
    color = mask(color, alpha);
    color = hue_shift(color, hue_delta);

    return color;
}

float round_down(float num, float multiple) {
    float remainder = mod(num, multiple);
    return num - remainder;
}

const float SPIRAL_RESET_TIME = 30.0;

// Arrange leaf on a spiral
vec4 spiral(vec2 uv, float initial_seed) {
    float adjusted_time = mod(u_time + initial_seed, SPIRAL_RESET_TIME);
    float index = round_down(u_time + initial_seed, SPIRAL_RESET_TIME);
    float seed = initial_seed + index;

    float hue_delta = random(seed) * 1.0;
    float speed_delta = random(seed + 0.1) * 0.5 + 0.5;
    float a_delta = random(seed + 0.002) * 0.5;
    float k_delta = random(seed + 0.003) * 0.2;
    vec2 origin_delta = (vec2(random(seed + 0.004), random(seed + 0.005)) - 0.5) * 0.3;
    float direction = 1.0;
    if (random(seed + 0.006) < 0.5) {
        direction = -1.0;
    }
    float angle_offset = random(seed + 0.007) * 2.0 * PI;

    float a = 1.0 + a_delta;
    float k = 0.2 + k_delta;
    float angle = adjusted_time * speed_delta - 10.0;

    float scale = exp(k * angle);
    vec2 origin = vec2(a * scale * cos(angle), direction * a * scale * sin(angle));

    float x = origin.x;
    origin.x = origin.x * cos(angle_offset) + origin.y * sin(angle_offset);
    origin.y = -x * sin(angle_offset) + origin.y * cos(angle_offset);
    origin.y -= 0.1;

    float display_angle = angle;
    if (direction < 0.0) {
        display_angle = - display_angle + PI;
    }
    display_angle -= angle_offset;

    return leaf(uv, origin + origin_delta, vec2(0.1 * scale), display_angle, hue_delta);
}

void main (void) {
    vec2 image_uv = gl_FragCoord.xy / u_resolution.xy;
    vec2 uv = image_uv * 2.0 - 1.0;

    vec4 color = mix(vec4(0.32, 0.31, 0.22, 1.0), vec4(0.02, 0.38, 0.06, 1.0), image_uv.y);

    // Just make a ton of leaves on top of each other... there's probably a much better way of doing
    // this. This didn't lag on my local computer, but seems to cause terrible lag in the browser.
    color = composite(spiral(uv, 0.0), color);
    color = composite(spiral(uv, 0.1), color);
    color = composite(spiral(uv, 0.2), color);
    color = composite(spiral(uv, 0.3), color);
    color = composite(spiral(uv, 0.4), color);
    color = composite(spiral(uv, 0.5), color);
    color = composite(spiral(uv, 0.6), color);
    color = composite(spiral(uv, 0.7), color);
    color = composite(spiral(uv, 0.8), color);
    color = composite(spiral(uv, 0.9), color);
    color = composite(spiral(uv, 1.0), color);
    color = composite(spiral(uv, 1.1), color);
    color = composite(spiral(uv, 1.2), color);
    color = composite(spiral(uv, 1.3), color);
    color = composite(spiral(uv, 1.4), color);
    color = composite(spiral(uv, 1.5), color);
    color = composite(spiral(uv, 1.6), color);
    color = composite(spiral(uv, 1.7), color);
    color = composite(spiral(uv, 1.8), color);
    color = composite(spiral(uv, 1.9), color);
    color = composite(spiral(uv, 2.0), color);
    color = composite(spiral(uv, 2.1), color);
    color = composite(spiral(uv, 2.2), color);
    color = composite(spiral(uv, 2.3), color);
    color = composite(spiral(uv, 2.4), color);
    color = composite(spiral(uv, 2.5), color);
    color = composite(spiral(uv, 2.6), color);
    color = composite(spiral(uv, 2.7), color);
    color = composite(spiral(uv, 2.8), color);
    color = composite(spiral(uv, 2.9), color);
    color = composite(spiral(uv, 3.0), color);
    color = composite(spiral(uv, 3.1), color);
    color = composite(spiral(uv, 3.2), color);
    color = composite(spiral(uv, 3.3), color);
    color = composite(spiral(uv, 3.4), color);
    color = composite(spiral(uv, 3.5), color);
    color = composite(spiral(uv, 3.6), color);
    color = composite(spiral(uv, 3.7), color);
    color = composite(spiral(uv, 3.8), color);
    color = composite(spiral(uv, 3.9), color);
    color = composite(spiral(uv, 4.0), color);
    color = composite(spiral(uv, 4.1), color);
    color = composite(spiral(uv, 4.2), color);
    color = composite(spiral(uv, 4.3), color);
    color = composite(spiral(uv, 4.4), color);
    color = composite(spiral(uv, 4.5), color);
    color = composite(spiral(uv, 4.6), color);
    color = composite(spiral(uv, 4.7), color);
    color = composite(spiral(uv, 4.8), color);
    color = composite(spiral(uv, 4.9), color);
    color = composite(spiral(uv, 5.0), color);
    color = composite(spiral(uv, 5.1), color);
    color = composite(spiral(uv, 5.2), color);
    color = composite(spiral(uv, 5.3), color);
    color = composite(spiral(uv, 5.4), color);
    color = composite(spiral(uv, 5.5), color);
    color = composite(spiral(uv, 5.6), color);
    color = composite(spiral(uv, 5.7), color);
    color = composite(spiral(uv, 5.8), color);
    color = composite(spiral(uv, 5.9), color);
    color = composite(spiral(uv, 6.0), color);
    color = composite(spiral(uv, 6.1), color);
    color = composite(spiral(uv, 6.2), color);
    color = composite(spiral(uv, 6.3), color);
    color = composite(spiral(uv, 6.4), color);
    color = composite(spiral(uv, 6.5), color);
    color = composite(spiral(uv, 6.6), color);
    color = composite(spiral(uv, 6.7), color);
    color = composite(spiral(uv, 6.8), color);
    color = composite(spiral(uv, 6.9), color);
    color = composite(spiral(uv, 7.0), color);
    color = composite(spiral(uv, 7.1), color);
    color = composite(spiral(uv, 7.2), color);
    color = composite(spiral(uv, 7.3), color);
    color = composite(spiral(uv, 7.4), color);
    color = composite(spiral(uv, 7.5), color);
    color = composite(spiral(uv, 7.6), color);
    color = composite(spiral(uv, 7.7), color);
    color = composite(spiral(uv, 7.8), color);
    color = composite(spiral(uv, 7.9), color);
    color = composite(spiral(uv, 8.0), color);
    color = composite(spiral(uv, 8.1), color);
    color = composite(spiral(uv, 8.2), color);
    color = composite(spiral(uv, 8.3), color);
    color = composite(spiral(uv, 8.4), color);
    color = composite(spiral(uv, 8.5), color);
    color = composite(spiral(uv, 8.6), color);
    color = composite(spiral(uv, 8.7), color);
    color = composite(spiral(uv, 8.8), color);
    color = composite(spiral(uv, 8.9), color);
    color = composite(spiral(uv, 9.0), color);
    color = composite(spiral(uv, 9.1), color);
    color = composite(spiral(uv, 9.2), color);
    color = composite(spiral(uv, 9.3), color);
    color = composite(spiral(uv, 9.4), color);
    color = composite(spiral(uv, 9.5), color);
    color = composite(spiral(uv, 9.6), color);
    color = composite(spiral(uv, 9.7), color);
    color = composite(spiral(uv, 9.8), color);
    color = composite(spiral(uv, 9.9), color);
    color = composite(spiral(uv, 10.0), color);
    color = composite(spiral(uv, 10.1), color);
    color = composite(spiral(uv, 10.2), color);
    color = composite(spiral(uv, 10.3), color);
    color = composite(spiral(uv, 10.4), color);
    color = composite(spiral(uv, 10.5), color);
    color = composite(spiral(uv, 10.6), color);
    color = composite(spiral(uv, 10.7), color);
    color = composite(spiral(uv, 10.8), color);
    color = composite(spiral(uv, 10.9), color);
    color = composite(spiral(uv, 11.0), color);
    color = composite(spiral(uv, 11.1), color);
    color = composite(spiral(uv, 11.2), color);
    color = composite(spiral(uv, 11.3), color);
    color = composite(spiral(uv, 11.4), color);
    color = composite(spiral(uv, 11.5), color);
    color = composite(spiral(uv, 11.6), color);
    color = composite(spiral(uv, 11.7), color);
    color = composite(spiral(uv, 11.8), color);
    color = composite(spiral(uv, 11.9), color);
    color = composite(spiral(uv, 12.0), color);
    color = composite(spiral(uv, 12.1), color);
    color = composite(spiral(uv, 12.2), color);
    color = composite(spiral(uv, 12.3), color);
    color = composite(spiral(uv, 12.4), color);
    color = composite(spiral(uv, 12.5), color);
    color = composite(spiral(uv, 12.6), color);
    color = composite(spiral(uv, 12.7), color);
    color = composite(spiral(uv, 12.8), color);
    color = composite(spiral(uv, 12.9), color);
    color = composite(spiral(uv, 13.0), color);
    color = composite(spiral(uv, 13.1), color);
    color = composite(spiral(uv, 13.2), color);
    color = composite(spiral(uv, 13.3), color);
    color = composite(spiral(uv, 13.4), color);
    color = composite(spiral(uv, 13.5), color);
    color = composite(spiral(uv, 13.6), color);
    color = composite(spiral(uv, 13.7), color);
    color = composite(spiral(uv, 13.8), color);
    color = composite(spiral(uv, 13.9), color);
    color = composite(spiral(uv, 14.0), color);
    color = composite(spiral(uv, 14.1), color);
    color = composite(spiral(uv, 14.2), color);
    color = composite(spiral(uv, 14.3), color);
    color = composite(spiral(uv, 14.4), color);
    color = composite(spiral(uv, 14.5), color);
    color = composite(spiral(uv, 14.6), color);
    color = composite(spiral(uv, 14.7), color);
    color = composite(spiral(uv, 14.8), color);
    color = composite(spiral(uv, 14.9), color);
    color = composite(spiral(uv, 15.0), color);
    color = composite(spiral(uv, 15.1), color);
    color = composite(spiral(uv, 15.2), color);
    color = composite(spiral(uv, 15.3), color);
    color = composite(spiral(uv, 15.4), color);
    color = composite(spiral(uv, 15.5), color);
    color = composite(spiral(uv, 15.6), color);
    color = composite(spiral(uv, 15.7), color);
    color = composite(spiral(uv, 15.8), color);
    color = composite(spiral(uv, 15.9), color);
    color = composite(spiral(uv, 16.0), color);
    color = composite(spiral(uv, 16.1), color);
    color = composite(spiral(uv, 16.2), color);
    color = composite(spiral(uv, 16.3), color);
    color = composite(spiral(uv, 16.4), color);
    color = composite(spiral(uv, 16.5), color);
    color = composite(spiral(uv, 16.6), color);
    color = composite(spiral(uv, 16.7), color);
    color = composite(spiral(uv, 16.8), color);
    color = composite(spiral(uv, 16.9), color);
    color = composite(spiral(uv, 17.0), color);
    color = composite(spiral(uv, 17.1), color);
    color = composite(spiral(uv, 17.2), color);
    color = composite(spiral(uv, 17.3), color);
    color = composite(spiral(uv, 17.4), color);
    color = composite(spiral(uv, 17.5), color);
    color = composite(spiral(uv, 17.6), color);
    color = composite(spiral(uv, 17.7), color);
    color = composite(spiral(uv, 17.8), color);
    color = composite(spiral(uv, 17.9), color);
    color = composite(spiral(uv, 18.0), color);
    color = composite(spiral(uv, 18.1), color);
    color = composite(spiral(uv, 18.2), color);
    color = composite(spiral(uv, 18.3), color);
    color = composite(spiral(uv, 18.4), color);
    color = composite(spiral(uv, 18.5), color);
    color = composite(spiral(uv, 18.6), color);
    color = composite(spiral(uv, 18.7), color);
    color = composite(spiral(uv, 18.8), color);
    color = composite(spiral(uv, 18.9), color);
    color = composite(spiral(uv, 19.0), color);
    color = composite(spiral(uv, 19.1), color);
    color = composite(spiral(uv, 19.2), color);
    color = composite(spiral(uv, 19.3), color);
    color = composite(spiral(uv, 19.4), color);
    color = composite(spiral(uv, 19.5), color);
    color = composite(spiral(uv, 19.6), color);
    color = composite(spiral(uv, 19.7), color);
    color = composite(spiral(uv, 19.8), color);
    color = composite(spiral(uv, 19.9), color);
    color = composite(spiral(uv, 20.0), color);
    color = composite(spiral(uv, 20.1), color);
    color = composite(spiral(uv, 20.2), color);
    color = composite(spiral(uv, 20.3), color);
    color = composite(spiral(uv, 20.4), color);
    color = composite(spiral(uv, 20.5), color);
    color = composite(spiral(uv, 20.6), color);
    color = composite(spiral(uv, 20.7), color);
    color = composite(spiral(uv, 20.8), color);
    color = composite(spiral(uv, 20.9), color);
    color = composite(spiral(uv, 21.0), color);
    color = composite(spiral(uv, 21.1), color);
    color = composite(spiral(uv, 21.2), color);
    color = composite(spiral(uv, 21.3), color);
    color = composite(spiral(uv, 21.4), color);
    color = composite(spiral(uv, 21.5), color);
    color = composite(spiral(uv, 21.6), color);
    color = composite(spiral(uv, 21.7), color);
    color = composite(spiral(uv, 21.8), color);
    color = composite(spiral(uv, 21.9), color);
    color = composite(spiral(uv, 22.0), color);
    color = composite(spiral(uv, 22.1), color);
    color = composite(spiral(uv, 22.2), color);
    color = composite(spiral(uv, 22.3), color);
    color = composite(spiral(uv, 22.4), color);
    color = composite(spiral(uv, 22.5), color);
    color = composite(spiral(uv, 22.6), color);
    color = composite(spiral(uv, 22.7), color);
    color = composite(spiral(uv, 22.8), color);
    color = composite(spiral(uv, 22.9), color);
    color = composite(spiral(uv, 23.0), color);
    color = composite(spiral(uv, 23.1), color);
    color = composite(spiral(uv, 23.2), color);
    color = composite(spiral(uv, 23.3), color);
    color = composite(spiral(uv, 23.4), color);
    color = composite(spiral(uv, 23.5), color);
    color = composite(spiral(uv, 23.6), color);
    color = composite(spiral(uv, 23.7), color);
    color = composite(spiral(uv, 23.8), color);
    color = composite(spiral(uv, 23.9), color);
    color = composite(spiral(uv, 24.0), color);
    color = composite(spiral(uv, 24.1), color);
    color = composite(spiral(uv, 24.2), color);
    color = composite(spiral(uv, 24.3), color);
    color = composite(spiral(uv, 24.4), color);
    color = composite(spiral(uv, 24.5), color);
    color = composite(spiral(uv, 24.6), color);
    color = composite(spiral(uv, 24.7), color);
    color = composite(spiral(uv, 24.8), color);
    color = composite(spiral(uv, 24.9), color);
    color = composite(spiral(uv, 25.0), color);
    color = composite(spiral(uv, 25.1), color);
    color = composite(spiral(uv, 25.2), color);
    color = composite(spiral(uv, 25.3), color);
    color = composite(spiral(uv, 25.4), color);
    color = composite(spiral(uv, 25.5), color);
    color = composite(spiral(uv, 25.6), color);
    color = composite(spiral(uv, 25.7), color);
    color = composite(spiral(uv, 25.8), color);
    color = composite(spiral(uv, 25.9), color);
    color = composite(spiral(uv, 26.0), color);
    color = composite(spiral(uv, 26.1), color);
    color = composite(spiral(uv, 26.2), color);
    color = composite(spiral(uv, 26.3), color);
    color = composite(spiral(uv, 26.4), color);
    color = composite(spiral(uv, 26.5), color);
    color = composite(spiral(uv, 26.6), color);
    color = composite(spiral(uv, 26.7), color);
    color = composite(spiral(uv, 26.8), color);
    color = composite(spiral(uv, 26.9), color);
    color = composite(spiral(uv, 27.0), color);
    color = composite(spiral(uv, 27.1), color);
    color = composite(spiral(uv, 27.2), color);
    color = composite(spiral(uv, 27.3), color);
    color = composite(spiral(uv, 27.4), color);
    color = composite(spiral(uv, 27.5), color);
    color = composite(spiral(uv, 27.6), color);
    color = composite(spiral(uv, 27.7), color);
    color = composite(spiral(uv, 27.8), color);
    color = composite(spiral(uv, 27.9), color);
    color = composite(spiral(uv, 28.0), color);
    color = composite(spiral(uv, 28.1), color);
    color = composite(spiral(uv, 28.2), color);
    color = composite(spiral(uv, 28.3), color);
    color = composite(spiral(uv, 28.4), color);
    color = composite(spiral(uv, 28.5), color);
    color = composite(spiral(uv, 28.6), color);
    color = composite(spiral(uv, 28.7), color);
    color = composite(spiral(uv, 28.8), color);
    color = composite(spiral(uv, 28.9), color);
    color = composite(spiral(uv, 29.0), color);
    color = composite(spiral(uv, 29.1), color);
    color = composite(spiral(uv, 29.2), color);
    color = composite(spiral(uv, 29.3), color);
    color = composite(spiral(uv, 29.4), color);
    color = composite(spiral(uv, 29.5), color);
    color = composite(spiral(uv, 29.6), color);
    color = composite(spiral(uv, 29.7), color);
    color = composite(spiral(uv, 29.8), color);
    color = composite(spiral(uv, 29.9), color);

    color = composite(spiral(uv, 0.05), color);
    color = composite(spiral(uv, 0.15), color);
    color = composite(spiral(uv, 0.25), color);
    color = composite(spiral(uv, 0.35), color);
    color = composite(spiral(uv, 0.45), color);
    color = composite(spiral(uv, 0.55), color);
    color = composite(spiral(uv, 0.65), color);
    color = composite(spiral(uv, 0.75), color);
    color = composite(spiral(uv, 0.85), color);
    color = composite(spiral(uv, 0.95), color);
    color = composite(spiral(uv, 1.05), color);
    color = composite(spiral(uv, 1.15), color);
    color = composite(spiral(uv, 1.25), color);
    color = composite(spiral(uv, 1.35), color);
    color = composite(spiral(uv, 1.45), color);
    color = composite(spiral(uv, 1.55), color);
    color = composite(spiral(uv, 1.65), color);
    color = composite(spiral(uv, 1.75), color);
    color = composite(spiral(uv, 1.85), color);
    color = composite(spiral(uv, 1.95), color);
    color = composite(spiral(uv, 2.05), color);
    color = composite(spiral(uv, 2.15), color);
    color = composite(spiral(uv, 2.25), color);
    color = composite(spiral(uv, 2.35), color);
    color = composite(spiral(uv, 2.45), color);
    color = composite(spiral(uv, 2.55), color);
    color = composite(spiral(uv, 2.65), color);
    color = composite(spiral(uv, 2.75), color);
    color = composite(spiral(uv, 2.85), color);
    color = composite(spiral(uv, 2.95), color);
    color = composite(spiral(uv, 3.05), color);
    color = composite(spiral(uv, 3.15), color);
    color = composite(spiral(uv, 3.25), color);
    color = composite(spiral(uv, 3.35), color);
    color = composite(spiral(uv, 3.45), color);
    color = composite(spiral(uv, 3.55), color);
    color = composite(spiral(uv, 3.65), color);
    color = composite(spiral(uv, 3.75), color);
    color = composite(spiral(uv, 3.85), color);
    color = composite(spiral(uv, 3.95), color);
    color = composite(spiral(uv, 4.05), color);
    color = composite(spiral(uv, 4.15), color);
    color = composite(spiral(uv, 4.25), color);
    color = composite(spiral(uv, 4.35), color);
    color = composite(spiral(uv, 4.45), color);
    color = composite(spiral(uv, 4.55), color);
    color = composite(spiral(uv, 4.65), color);
    color = composite(spiral(uv, 4.75), color);
    color = composite(spiral(uv, 4.85), color);
    color = composite(spiral(uv, 4.95), color);
    color = composite(spiral(uv, 5.05), color);
    color = composite(spiral(uv, 5.15), color);
    color = composite(spiral(uv, 5.25), color);
    color = composite(spiral(uv, 5.35), color);
    color = composite(spiral(uv, 5.45), color);
    color = composite(spiral(uv, 5.55), color);
    color = composite(spiral(uv, 5.65), color);
    color = composite(spiral(uv, 5.75), color);
    color = composite(spiral(uv, 5.85), color);
    color = composite(spiral(uv, 5.95), color);
    color = composite(spiral(uv, 6.05), color);
    color = composite(spiral(uv, 6.15), color);
    color = composite(spiral(uv, 6.25), color);
    color = composite(spiral(uv, 6.35), color);
    color = composite(spiral(uv, 6.45), color);
    color = composite(spiral(uv, 6.55), color);
    color = composite(spiral(uv, 6.65), color);
    color = composite(spiral(uv, 6.75), color);
    color = composite(spiral(uv, 6.85), color);
    color = composite(spiral(uv, 6.95), color);
    color = composite(spiral(uv, 7.05), color);
    color = composite(spiral(uv, 7.15), color);
    color = composite(spiral(uv, 7.25), color);
    color = composite(spiral(uv, 7.35), color);
    color = composite(spiral(uv, 7.45), color);
    color = composite(spiral(uv, 7.55), color);
    color = composite(spiral(uv, 7.65), color);
    color = composite(spiral(uv, 7.75), color);
    color = composite(spiral(uv, 7.85), color);
    color = composite(spiral(uv, 7.95), color);
    color = composite(spiral(uv, 8.05), color);
    color = composite(spiral(uv, 8.15), color);
    color = composite(spiral(uv, 8.25), color);
    color = composite(spiral(uv, 8.35), color);
    color = composite(spiral(uv, 8.45), color);
    color = composite(spiral(uv, 8.55), color);
    color = composite(spiral(uv, 8.65), color);
    color = composite(spiral(uv, 8.75), color);
    color = composite(spiral(uv, 8.85), color);
    color = composite(spiral(uv, 8.95), color);
    color = composite(spiral(uv, 9.05), color);
    color = composite(spiral(uv, 9.15), color);
    color = composite(spiral(uv, 9.25), color);
    color = composite(spiral(uv, 9.35), color);
    color = composite(spiral(uv, 9.45), color);
    color = composite(spiral(uv, 9.55), color);
    color = composite(spiral(uv, 9.65), color);
    color = composite(spiral(uv, 9.75), color);
    color = composite(spiral(uv, 9.85), color);
    color = composite(spiral(uv, 9.95), color);
    color = composite(spiral(uv, 10.05), color);
    color = composite(spiral(uv, 10.15), color);
    color = composite(spiral(uv, 10.25), color);
    color = composite(spiral(uv, 10.35), color);
    color = composite(spiral(uv, 10.45), color);
    color = composite(spiral(uv, 10.55), color);
    color = composite(spiral(uv, 10.65), color);
    color = composite(spiral(uv, 10.75), color);
    color = composite(spiral(uv, 10.85), color);
    color = composite(spiral(uv, 10.95), color);
    color = composite(spiral(uv, 11.05), color);
    color = composite(spiral(uv, 11.15), color);
    color = composite(spiral(uv, 11.25), color);
    color = composite(spiral(uv, 11.35), color);
    color = composite(spiral(uv, 11.45), color);
    color = composite(spiral(uv, 11.55), color);
    color = composite(spiral(uv, 11.65), color);
    color = composite(spiral(uv, 11.75), color);
    color = composite(spiral(uv, 11.85), color);
    color = composite(spiral(uv, 11.95), color);
    color = composite(spiral(uv, 12.05), color);
    color = composite(spiral(uv, 12.15), color);
    color = composite(spiral(uv, 12.25), color);
    color = composite(spiral(uv, 12.35), color);
    color = composite(spiral(uv, 12.45), color);
    color = composite(spiral(uv, 12.55), color);
    color = composite(spiral(uv, 12.65), color);
    color = composite(spiral(uv, 12.75), color);
    color = composite(spiral(uv, 12.85), color);
    color = composite(spiral(uv, 12.95), color);
    color = composite(spiral(uv, 13.05), color);
    color = composite(spiral(uv, 13.15), color);
    color = composite(spiral(uv, 13.25), color);
    color = composite(spiral(uv, 13.35), color);
    color = composite(spiral(uv, 13.45), color);
    color = composite(spiral(uv, 13.55), color);
    color = composite(spiral(uv, 13.65), color);
    color = composite(spiral(uv, 13.75), color);
    color = composite(spiral(uv, 13.85), color);
    color = composite(spiral(uv, 13.95), color);
    color = composite(spiral(uv, 14.05), color);
    color = composite(spiral(uv, 14.15), color);
    color = composite(spiral(uv, 14.25), color);
    color = composite(spiral(uv, 14.35), color);
    color = composite(spiral(uv, 14.45), color);
    color = composite(spiral(uv, 14.55), color);
    color = composite(spiral(uv, 14.65), color);
    color = composite(spiral(uv, 14.75), color);
    color = composite(spiral(uv, 14.85), color);
    color = composite(spiral(uv, 14.95), color);
    color = composite(spiral(uv, 15.05), color);
    color = composite(spiral(uv, 15.15), color);
    color = composite(spiral(uv, 15.25), color);
    color = composite(spiral(uv, 15.35), color);
    color = composite(spiral(uv, 15.45), color);
    color = composite(spiral(uv, 15.55), color);
    color = composite(spiral(uv, 15.65), color);
    color = composite(spiral(uv, 15.75), color);
    color = composite(spiral(uv, 15.85), color);
    color = composite(spiral(uv, 15.95), color);
    color = composite(spiral(uv, 16.05), color);
    color = composite(spiral(uv, 16.15), color);
    color = composite(spiral(uv, 16.25), color);
    color = composite(spiral(uv, 16.35), color);
    color = composite(spiral(uv, 16.45), color);
    color = composite(spiral(uv, 16.55), color);
    color = composite(spiral(uv, 16.65), color);
    color = composite(spiral(uv, 16.75), color);
    color = composite(spiral(uv, 16.85), color);
    color = composite(spiral(uv, 16.95), color);
    color = composite(spiral(uv, 17.05), color);
    color = composite(spiral(uv, 17.15), color);
    color = composite(spiral(uv, 17.25), color);
    color = composite(spiral(uv, 17.35), color);
    color = composite(spiral(uv, 17.45), color);
    color = composite(spiral(uv, 17.55), color);
    color = composite(spiral(uv, 17.65), color);
    color = composite(spiral(uv, 17.75), color);
    color = composite(spiral(uv, 17.85), color);
    color = composite(spiral(uv, 17.95), color);
    color = composite(spiral(uv, 18.05), color);
    color = composite(spiral(uv, 18.15), color);
    color = composite(spiral(uv, 18.25), color);
    color = composite(spiral(uv, 18.35), color);
    color = composite(spiral(uv, 18.45), color);
    color = composite(spiral(uv, 18.55), color);
    color = composite(spiral(uv, 18.65), color);
    color = composite(spiral(uv, 18.75), color);
    color = composite(spiral(uv, 18.85), color);
    color = composite(spiral(uv, 18.95), color);
    color = composite(spiral(uv, 19.05), color);
    color = composite(spiral(uv, 19.15), color);
    color = composite(spiral(uv, 19.25), color);
    color = composite(spiral(uv, 19.35), color);
    color = composite(spiral(uv, 19.45), color);
    color = composite(spiral(uv, 19.55), color);
    color = composite(spiral(uv, 19.65), color);
    color = composite(spiral(uv, 19.75), color);
    color = composite(spiral(uv, 19.85), color);
    color = composite(spiral(uv, 19.95), color);
    color = composite(spiral(uv, 20.05), color);
    color = composite(spiral(uv, 20.15), color);
    color = composite(spiral(uv, 20.25), color);
    color = composite(spiral(uv, 20.35), color);
    color = composite(spiral(uv, 20.45), color);
    color = composite(spiral(uv, 20.55), color);
    color = composite(spiral(uv, 20.65), color);
    color = composite(spiral(uv, 20.75), color);
    color = composite(spiral(uv, 20.85), color);
    color = composite(spiral(uv, 20.95), color);
    color = composite(spiral(uv, 21.05), color);
    color = composite(spiral(uv, 21.15), color);
    color = composite(spiral(uv, 21.25), color);
    color = composite(spiral(uv, 21.35), color);
    color = composite(spiral(uv, 21.45), color);
    color = composite(spiral(uv, 21.55), color);
    color = composite(spiral(uv, 21.65), color);
    color = composite(spiral(uv, 21.75), color);
    color = composite(spiral(uv, 21.85), color);
    color = composite(spiral(uv, 21.95), color);
    color = composite(spiral(uv, 22.05), color);
    color = composite(spiral(uv, 22.15), color);
    color = composite(spiral(uv, 22.25), color);
    color = composite(spiral(uv, 22.35), color);
    color = composite(spiral(uv, 22.45), color);
    color = composite(spiral(uv, 22.55), color);
    color = composite(spiral(uv, 22.65), color);
    color = composite(spiral(uv, 22.75), color);
    color = composite(spiral(uv, 22.85), color);
    color = composite(spiral(uv, 22.95), color);
    color = composite(spiral(uv, 23.05), color);
    color = composite(spiral(uv, 23.15), color);
    color = composite(spiral(uv, 23.25), color);
    color = composite(spiral(uv, 23.35), color);
    color = composite(spiral(uv, 23.45), color);
    color = composite(spiral(uv, 23.55), color);
    color = composite(spiral(uv, 23.65), color);
    color = composite(spiral(uv, 23.75), color);
    color = composite(spiral(uv, 23.85), color);
    color = composite(spiral(uv, 23.95), color);
    color = composite(spiral(uv, 24.05), color);
    color = composite(spiral(uv, 24.15), color);
    color = composite(spiral(uv, 24.25), color);
    color = composite(spiral(uv, 24.35), color);
    color = composite(spiral(uv, 24.45), color);
    color = composite(spiral(uv, 24.55), color);
    color = composite(spiral(uv, 24.65), color);
    color = composite(spiral(uv, 24.75), color);
    color = composite(spiral(uv, 24.85), color);
    color = composite(spiral(uv, 24.95), color);
    color = composite(spiral(uv, 25.05), color);
    color = composite(spiral(uv, 25.15), color);
    color = composite(spiral(uv, 25.25), color);
    color = composite(spiral(uv, 25.35), color);
    color = composite(spiral(uv, 25.45), color);
    color = composite(spiral(uv, 25.55), color);
    color = composite(spiral(uv, 25.65), color);
    color = composite(spiral(uv, 25.75), color);
    color = composite(spiral(uv, 25.85), color);
    color = composite(spiral(uv, 25.95), color);
    color = composite(spiral(uv, 26.05), color);
    color = composite(spiral(uv, 26.15), color);
    color = composite(spiral(uv, 26.25), color);
    color = composite(spiral(uv, 26.35), color);
    color = composite(spiral(uv, 26.45), color);
    color = composite(spiral(uv, 26.55), color);
    color = composite(spiral(uv, 26.65), color);
    color = composite(spiral(uv, 26.75), color);
    color = composite(spiral(uv, 26.85), color);
    color = composite(spiral(uv, 26.95), color);
    color = composite(spiral(uv, 27.05), color);
    color = composite(spiral(uv, 27.15), color);
    color = composite(spiral(uv, 27.25), color);
    color = composite(spiral(uv, 27.35), color);
    color = composite(spiral(uv, 27.45), color);
    color = composite(spiral(uv, 27.55), color);
    color = composite(spiral(uv, 27.65), color);
    color = composite(spiral(uv, 27.75), color);
    color = composite(spiral(uv, 27.85), color);
    color = composite(spiral(uv, 27.95), color);
    color = composite(spiral(uv, 28.05), color);
    color = composite(spiral(uv, 28.15), color);
    color = composite(spiral(uv, 28.25), color);
    color = composite(spiral(uv, 28.35), color);
    color = composite(spiral(uv, 28.45), color);
    color = composite(spiral(uv, 28.55), color);
    color = composite(spiral(uv, 28.65), color);
    color = composite(spiral(uv, 28.75), color);
    color = composite(spiral(uv, 28.85), color);
    color = composite(spiral(uv, 28.95), color);
    color = composite(spiral(uv, 29.05), color);
    color = composite(spiral(uv, 29.15), color);
    color = composite(spiral(uv, 29.25), color);
    color = composite(spiral(uv, 29.35), color);
    color = composite(spiral(uv, 29.45), color);
    color = composite(spiral(uv, 29.55), color);
    color = composite(spiral(uv, 29.65), color);
    color = composite(spiral(uv, 29.75), color);
    color = composite(spiral(uv, 29.85), color);
    color = composite(spiral(uv, 29.95), color);

    color = composite(spiral(uv, 0.025), color);
    color = composite(spiral(uv, 0.125), color);
    color = composite(spiral(uv, 0.225), color);
    color = composite(spiral(uv, 0.325), color);
    color = composite(spiral(uv, 0.425), color);
    color = composite(spiral(uv, 0.525), color);
    color = composite(spiral(uv, 0.625), color);
    color = composite(spiral(uv, 0.725), color);
    color = composite(spiral(uv, 0.825), color);
    color = composite(spiral(uv, 0.925), color);
    color = composite(spiral(uv, 1.025), color);
    color = composite(spiral(uv, 1.125), color);
    color = composite(spiral(uv, 1.225), color);
    color = composite(spiral(uv, 1.325), color);
    color = composite(spiral(uv, 1.425), color);
    color = composite(spiral(uv, 1.525), color);
    color = composite(spiral(uv, 1.625), color);
    color = composite(spiral(uv, 1.725), color);
    color = composite(spiral(uv, 1.825), color);
    color = composite(spiral(uv, 1.925), color);
    color = composite(spiral(uv, 2.025), color);
    color = composite(spiral(uv, 2.125), color);
    color = composite(spiral(uv, 2.225), color);
    color = composite(spiral(uv, 2.325), color);
    color = composite(spiral(uv, 2.425), color);
    color = composite(spiral(uv, 2.525), color);
    color = composite(spiral(uv, 2.625), color);
    color = composite(spiral(uv, 2.725), color);
    color = composite(spiral(uv, 2.825), color);
    color = composite(spiral(uv, 2.925), color);
    color = composite(spiral(uv, 3.025), color);
    color = composite(spiral(uv, 3.125), color);
    color = composite(spiral(uv, 3.225), color);
    color = composite(spiral(uv, 3.325), color);
    color = composite(spiral(uv, 3.425), color);
    color = composite(spiral(uv, 3.525), color);
    color = composite(spiral(uv, 3.625), color);
    color = composite(spiral(uv, 3.725), color);
    color = composite(spiral(uv, 3.825), color);
    color = composite(spiral(uv, 3.925), color);
    color = composite(spiral(uv, 4.025), color);
    color = composite(spiral(uv, 4.125), color);
    color = composite(spiral(uv, 4.225), color);
    color = composite(spiral(uv, 4.325), color);
    color = composite(spiral(uv, 4.425), color);
    color = composite(spiral(uv, 4.525), color);
    color = composite(spiral(uv, 4.625), color);
    color = composite(spiral(uv, 4.725), color);
    color = composite(spiral(uv, 4.825), color);
    color = composite(spiral(uv, 4.925), color);
    color = composite(spiral(uv, 5.025), color);
    color = composite(spiral(uv, 5.125), color);
    color = composite(spiral(uv, 5.225), color);
    color = composite(spiral(uv, 5.325), color);
    color = composite(spiral(uv, 5.425), color);
    color = composite(spiral(uv, 5.525), color);
    color = composite(spiral(uv, 5.625), color);
    color = composite(spiral(uv, 5.725), color);
    color = composite(spiral(uv, 5.825), color);
    color = composite(spiral(uv, 5.925), color);
    color = composite(spiral(uv, 6.025), color);
    color = composite(spiral(uv, 6.125), color);
    color = composite(spiral(uv, 6.225), color);
    color = composite(spiral(uv, 6.325), color);
    color = composite(spiral(uv, 6.425), color);
    color = composite(spiral(uv, 6.525), color);
    color = composite(spiral(uv, 6.625), color);
    color = composite(spiral(uv, 6.725), color);
    color = composite(spiral(uv, 6.825), color);
    color = composite(spiral(uv, 6.925), color);
    color = composite(spiral(uv, 7.025), color);
    color = composite(spiral(uv, 7.125), color);
    color = composite(spiral(uv, 7.225), color);
    color = composite(spiral(uv, 7.325), color);
    color = composite(spiral(uv, 7.425), color);
    color = composite(spiral(uv, 7.525), color);
    color = composite(spiral(uv, 7.625), color);
    color = composite(spiral(uv, 7.725), color);
    color = composite(spiral(uv, 7.825), color);
    color = composite(spiral(uv, 7.925), color);
    color = composite(spiral(uv, 8.025), color);
    color = composite(spiral(uv, 8.125), color);
    color = composite(spiral(uv, 8.225), color);
    color = composite(spiral(uv, 8.325), color);
    color = composite(spiral(uv, 8.425), color);
    color = composite(spiral(uv, 8.525), color);
    color = composite(spiral(uv, 8.625), color);
    color = composite(spiral(uv, 8.725), color);
    color = composite(spiral(uv, 8.825), color);
    color = composite(spiral(uv, 8.925), color);
    color = composite(spiral(uv, 9.025), color);
    color = composite(spiral(uv, 9.125), color);
    color = composite(spiral(uv, 9.225), color);
    color = composite(spiral(uv, 9.325), color);
    color = composite(spiral(uv, 9.425), color);
    color = composite(spiral(uv, 9.525), color);
    color = composite(spiral(uv, 9.625), color);
    color = composite(spiral(uv, 9.725), color);
    color = composite(spiral(uv, 9.825), color);
    color = composite(spiral(uv, 9.925), color);
    color = composite(spiral(uv, 10.025), color);
    color = composite(spiral(uv, 10.125), color);
    color = composite(spiral(uv, 10.225), color);
    color = composite(spiral(uv, 10.325), color);
    color = composite(spiral(uv, 10.425), color);
    color = composite(spiral(uv, 10.525), color);
    color = composite(spiral(uv, 10.625), color);
    color = composite(spiral(uv, 10.725), color);
    color = composite(spiral(uv, 10.825), color);
    color = composite(spiral(uv, 10.925), color);
    color = composite(spiral(uv, 11.025), color);
    color = composite(spiral(uv, 11.125), color);
    color = composite(spiral(uv, 11.225), color);
    color = composite(spiral(uv, 11.325), color);
    color = composite(spiral(uv, 11.425), color);
    color = composite(spiral(uv, 11.525), color);
    color = composite(spiral(uv, 11.625), color);
    color = composite(spiral(uv, 11.725), color);
    color = composite(spiral(uv, 11.825), color);
    color = composite(spiral(uv, 11.925), color);
    color = composite(spiral(uv, 12.025), color);
    color = composite(spiral(uv, 12.125), color);
    color = composite(spiral(uv, 12.225), color);
    color = composite(spiral(uv, 12.325), color);
    color = composite(spiral(uv, 12.425), color);
    color = composite(spiral(uv, 12.525), color);
    color = composite(spiral(uv, 12.625), color);
    color = composite(spiral(uv, 12.725), color);
    color = composite(spiral(uv, 12.825), color);
    color = composite(spiral(uv, 12.925), color);
    color = composite(spiral(uv, 13.025), color);
    color = composite(spiral(uv, 13.125), color);
    color = composite(spiral(uv, 13.225), color);
    color = composite(spiral(uv, 13.325), color);
    color = composite(spiral(uv, 13.425), color);
    color = composite(spiral(uv, 13.525), color);
    color = composite(spiral(uv, 13.625), color);
    color = composite(spiral(uv, 13.725), color);
    color = composite(spiral(uv, 13.825), color);
    color = composite(spiral(uv, 13.925), color);
    color = composite(spiral(uv, 14.025), color);
    color = composite(spiral(uv, 14.125), color);
    color = composite(spiral(uv, 14.225), color);
    color = composite(spiral(uv, 14.325), color);
    color = composite(spiral(uv, 14.425), color);
    color = composite(spiral(uv, 14.525), color);
    color = composite(spiral(uv, 14.625), color);
    color = composite(spiral(uv, 14.725), color);
    color = composite(spiral(uv, 14.825), color);
    color = composite(spiral(uv, 14.925), color);
    color = composite(spiral(uv, 15.025), color);
    color = composite(spiral(uv, 15.125), color);
    color = composite(spiral(uv, 15.225), color);
    color = composite(spiral(uv, 15.325), color);
    color = composite(spiral(uv, 15.425), color);
    color = composite(spiral(uv, 15.525), color);
    color = composite(spiral(uv, 15.625), color);
    color = composite(spiral(uv, 15.725), color);
    color = composite(spiral(uv, 15.825), color);
    color = composite(spiral(uv, 15.925), color);
    color = composite(spiral(uv, 16.025), color);
    color = composite(spiral(uv, 16.125), color);
    color = composite(spiral(uv, 16.225), color);
    color = composite(spiral(uv, 16.325), color);
    color = composite(spiral(uv, 16.425), color);
    color = composite(spiral(uv, 16.525), color);
    color = composite(spiral(uv, 16.625), color);
    color = composite(spiral(uv, 16.725), color);
    color = composite(spiral(uv, 16.825), color);
    color = composite(spiral(uv, 16.925), color);
    color = composite(spiral(uv, 17.025), color);
    color = composite(spiral(uv, 17.125), color);
    color = composite(spiral(uv, 17.225), color);
    color = composite(spiral(uv, 17.325), color);
    color = composite(spiral(uv, 17.425), color);
    color = composite(spiral(uv, 17.525), color);
    color = composite(spiral(uv, 17.625), color);
    color = composite(spiral(uv, 17.725), color);
    color = composite(spiral(uv, 17.825), color);
    color = composite(spiral(uv, 17.925), color);
    color = composite(spiral(uv, 18.025), color);
    color = composite(spiral(uv, 18.125), color);
    color = composite(spiral(uv, 18.225), color);
    color = composite(spiral(uv, 18.325), color);
    color = composite(spiral(uv, 18.425), color);
    color = composite(spiral(uv, 18.525), color);
    color = composite(spiral(uv, 18.625), color);
    color = composite(spiral(uv, 18.725), color);
    color = composite(spiral(uv, 18.825), color);
    color = composite(spiral(uv, 18.925), color);
    color = composite(spiral(uv, 19.025), color);
    color = composite(spiral(uv, 19.125), color);
    color = composite(spiral(uv, 19.225), color);
    color = composite(spiral(uv, 19.325), color);
    color = composite(spiral(uv, 19.425), color);
    color = composite(spiral(uv, 19.525), color);
    color = composite(spiral(uv, 19.625), color);
    color = composite(spiral(uv, 19.725), color);
    color = composite(spiral(uv, 19.825), color);
    color = composite(spiral(uv, 19.925), color);
    color = composite(spiral(uv, 20.025), color);
    color = composite(spiral(uv, 20.125), color);
    color = composite(spiral(uv, 20.225), color);
    color = composite(spiral(uv, 20.325), color);
    color = composite(spiral(uv, 20.425), color);
    color = composite(spiral(uv, 20.525), color);
    color = composite(spiral(uv, 20.625), color);
    color = composite(spiral(uv, 20.725), color);
    color = composite(spiral(uv, 20.825), color);
    color = composite(spiral(uv, 20.925), color);
    color = composite(spiral(uv, 21.025), color);
    color = composite(spiral(uv, 21.125), color);
    color = composite(spiral(uv, 21.225), color);
    color = composite(spiral(uv, 21.325), color);
    color = composite(spiral(uv, 21.425), color);
    color = composite(spiral(uv, 21.525), color);
    color = composite(spiral(uv, 21.625), color);
    color = composite(spiral(uv, 21.725), color);
    color = composite(spiral(uv, 21.825), color);
    color = composite(spiral(uv, 21.925), color);
    color = composite(spiral(uv, 22.025), color);
    color = composite(spiral(uv, 22.125), color);
    color = composite(spiral(uv, 22.225), color);
    color = composite(spiral(uv, 22.325), color);
    color = composite(spiral(uv, 22.425), color);
    color = composite(spiral(uv, 22.525), color);
    color = composite(spiral(uv, 22.625), color);
    color = composite(spiral(uv, 22.725), color);
    color = composite(spiral(uv, 22.825), color);
    color = composite(spiral(uv, 22.925), color);
    color = composite(spiral(uv, 23.025), color);
    color = composite(spiral(uv, 23.125), color);
    color = composite(spiral(uv, 23.225), color);
    color = composite(spiral(uv, 23.325), color);
    color = composite(spiral(uv, 23.425), color);
    color = composite(spiral(uv, 23.525), color);
    color = composite(spiral(uv, 23.625), color);
    color = composite(spiral(uv, 23.725), color);
    color = composite(spiral(uv, 23.825), color);
    color = composite(spiral(uv, 23.925), color);
    color = composite(spiral(uv, 24.025), color);
    color = composite(spiral(uv, 24.125), color);
    color = composite(spiral(uv, 24.225), color);
    color = composite(spiral(uv, 24.325), color);
    color = composite(spiral(uv, 24.425), color);
    color = composite(spiral(uv, 24.525), color);
    color = composite(spiral(uv, 24.625), color);
    color = composite(spiral(uv, 24.725), color);
    color = composite(spiral(uv, 24.825), color);
    color = composite(spiral(uv, 24.925), color);
    color = composite(spiral(uv, 25.025), color);
    color = composite(spiral(uv, 25.125), color);
    color = composite(spiral(uv, 25.225), color);
    color = composite(spiral(uv, 25.325), color);
    color = composite(spiral(uv, 25.425), color);
    color = composite(spiral(uv, 25.525), color);
    color = composite(spiral(uv, 25.625), color);
    color = composite(spiral(uv, 25.725), color);
    color = composite(spiral(uv, 25.825), color);
    color = composite(spiral(uv, 25.925), color);
    color = composite(spiral(uv, 26.025), color);
    color = composite(spiral(uv, 26.125), color);
    color = composite(spiral(uv, 26.225), color);
    color = composite(spiral(uv, 26.325), color);
    color = composite(spiral(uv, 26.425), color);
    color = composite(spiral(uv, 26.525), color);
    color = composite(spiral(uv, 26.625), color);
    color = composite(spiral(uv, 26.725), color);
    color = composite(spiral(uv, 26.825), color);
    color = composite(spiral(uv, 26.925), color);
    color = composite(spiral(uv, 27.025), color);
    color = composite(spiral(uv, 27.125), color);
    color = composite(spiral(uv, 27.225), color);
    color = composite(spiral(uv, 27.325), color);
    color = composite(spiral(uv, 27.425), color);
    color = composite(spiral(uv, 27.525), color);
    color = composite(spiral(uv, 27.625), color);
    color = composite(spiral(uv, 27.725), color);
    color = composite(spiral(uv, 27.825), color);
    color = composite(spiral(uv, 27.925), color);
    color = composite(spiral(uv, 28.025), color);
    color = composite(spiral(uv, 28.125), color);
    color = composite(spiral(uv, 28.225), color);
    color = composite(spiral(uv, 28.325), color);
    color = composite(spiral(uv, 28.425), color);
    color = composite(spiral(uv, 28.525), color);
    color = composite(spiral(uv, 28.625), color);
    color = composite(spiral(uv, 28.725), color);
    color = composite(spiral(uv, 28.825), color);
    color = composite(spiral(uv, 28.925), color);
    color = composite(spiral(uv, 29.025), color);
    color = composite(spiral(uv, 29.125), color);
    color = composite(spiral(uv, 29.225), color);
    color = composite(spiral(uv, 29.325), color);
    color = composite(spiral(uv, 29.425), color);
    color = composite(spiral(uv, 29.525), color);
    color = composite(spiral(uv, 29.625), color);
    color = composite(spiral(uv, 29.725), color);
    color = composite(spiral(uv, 29.825), color);
    color = composite(spiral(uv, 29.925), color);

    color = composite(spiral(uv, 0.075), color);
    color = composite(spiral(uv, 0.175), color);
    color = composite(spiral(uv, 0.275), color);
    color = composite(spiral(uv, 0.375), color);
    color = composite(spiral(uv, 0.475), color);
    color = composite(spiral(uv, 0.575), color);
    color = composite(spiral(uv, 0.675), color);
    color = composite(spiral(uv, 0.775), color);
    color = composite(spiral(uv, 0.875), color);
    color = composite(spiral(uv, 0.975), color);
    color = composite(spiral(uv, 1.075), color);
    color = composite(spiral(uv, 1.175), color);
    color = composite(spiral(uv, 1.275), color);
    color = composite(spiral(uv, 1.375), color);
    color = composite(spiral(uv, 1.475), color);
    color = composite(spiral(uv, 1.575), color);
    color = composite(spiral(uv, 1.675), color);
    color = composite(spiral(uv, 1.775), color);
    color = composite(spiral(uv, 1.875), color);
    color = composite(spiral(uv, 1.975), color);
    color = composite(spiral(uv, 2.075), color);
    color = composite(spiral(uv, 2.175), color);
    color = composite(spiral(uv, 2.275), color);
    color = composite(spiral(uv, 2.375), color);
    color = composite(spiral(uv, 2.475), color);
    color = composite(spiral(uv, 2.575), color);
    color = composite(spiral(uv, 2.675), color);
    color = composite(spiral(uv, 2.775), color);
    color = composite(spiral(uv, 2.875), color);
    color = composite(spiral(uv, 2.975), color);
    color = composite(spiral(uv, 3.075), color);
    color = composite(spiral(uv, 3.175), color);
    color = composite(spiral(uv, 3.275), color);
    color = composite(spiral(uv, 3.375), color);
    color = composite(spiral(uv, 3.475), color);
    color = composite(spiral(uv, 3.575), color);
    color = composite(spiral(uv, 3.675), color);
    color = composite(spiral(uv, 3.775), color);
    color = composite(spiral(uv, 3.875), color);
    color = composite(spiral(uv, 3.975), color);
    color = composite(spiral(uv, 4.075), color);
    color = composite(spiral(uv, 4.175), color);
    color = composite(spiral(uv, 4.275), color);
    color = composite(spiral(uv, 4.375), color);
    color = composite(spiral(uv, 4.475), color);
    color = composite(spiral(uv, 4.575), color);
    color = composite(spiral(uv, 4.675), color);
    color = composite(spiral(uv, 4.775), color);
    color = composite(spiral(uv, 4.875), color);
    color = composite(spiral(uv, 4.975), color);
    color = composite(spiral(uv, 5.075), color);
    color = composite(spiral(uv, 5.175), color);
    color = composite(spiral(uv, 5.275), color);
    color = composite(spiral(uv, 5.375), color);
    color = composite(spiral(uv, 5.475), color);
    color = composite(spiral(uv, 5.575), color);
    color = composite(spiral(uv, 5.675), color);
    color = composite(spiral(uv, 5.775), color);
    color = composite(spiral(uv, 5.875), color);
    color = composite(spiral(uv, 5.975), color);
    color = composite(spiral(uv, 6.075), color);
    color = composite(spiral(uv, 6.175), color);
    color = composite(spiral(uv, 6.275), color);
    color = composite(spiral(uv, 6.375), color);
    color = composite(spiral(uv, 6.475), color);
    color = composite(spiral(uv, 6.575), color);
    color = composite(spiral(uv, 6.675), color);
    color = composite(spiral(uv, 6.775), color);
    color = composite(spiral(uv, 6.875), color);
    color = composite(spiral(uv, 6.975), color);
    color = composite(spiral(uv, 7.075), color);
    color = composite(spiral(uv, 7.175), color);
    color = composite(spiral(uv, 7.275), color);
    color = composite(spiral(uv, 7.375), color);
    color = composite(spiral(uv, 7.475), color);
    color = composite(spiral(uv, 7.575), color);
    color = composite(spiral(uv, 7.675), color);
    color = composite(spiral(uv, 7.775), color);
    color = composite(spiral(uv, 7.875), color);
    color = composite(spiral(uv, 7.975), color);
    color = composite(spiral(uv, 8.075), color);
    color = composite(spiral(uv, 8.175), color);
    color = composite(spiral(uv, 8.275), color);
    color = composite(spiral(uv, 8.375), color);
    color = composite(spiral(uv, 8.475), color);
    color = composite(spiral(uv, 8.575), color);
    color = composite(spiral(uv, 8.675), color);
    color = composite(spiral(uv, 8.775), color);
    color = composite(spiral(uv, 8.875), color);
    color = composite(spiral(uv, 8.975), color);
    color = composite(spiral(uv, 9.075), color);
    color = composite(spiral(uv, 9.175), color);
    color = composite(spiral(uv, 9.275), color);
    color = composite(spiral(uv, 9.375), color);
    color = composite(spiral(uv, 9.475), color);
    color = composite(spiral(uv, 9.575), color);
    color = composite(spiral(uv, 9.675), color);
    color = composite(spiral(uv, 9.775), color);
    color = composite(spiral(uv, 9.875), color);
    color = composite(spiral(uv, 9.975), color);
    color = composite(spiral(uv, 10.075), color);
    color = composite(spiral(uv, 10.175), color);
    color = composite(spiral(uv, 10.275), color);
    color = composite(spiral(uv, 10.375), color);
    color = composite(spiral(uv, 10.475), color);
    color = composite(spiral(uv, 10.575), color);
    color = composite(spiral(uv, 10.675), color);
    color = composite(spiral(uv, 10.775), color);
    color = composite(spiral(uv, 10.875), color);
    color = composite(spiral(uv, 10.975), color);
    color = composite(spiral(uv, 11.075), color);
    color = composite(spiral(uv, 11.175), color);
    color = composite(spiral(uv, 11.275), color);
    color = composite(spiral(uv, 11.375), color);
    color = composite(spiral(uv, 11.475), color);
    color = composite(spiral(uv, 11.575), color);
    color = composite(spiral(uv, 11.675), color);
    color = composite(spiral(uv, 11.775), color);
    color = composite(spiral(uv, 11.875), color);
    color = composite(spiral(uv, 11.975), color);
    color = composite(spiral(uv, 12.075), color);
    color = composite(spiral(uv, 12.175), color);
    color = composite(spiral(uv, 12.275), color);
    color = composite(spiral(uv, 12.375), color);
    color = composite(spiral(uv, 12.475), color);
    color = composite(spiral(uv, 12.575), color);
    color = composite(spiral(uv, 12.675), color);
    color = composite(spiral(uv, 12.775), color);
    color = composite(spiral(uv, 12.875), color);
    color = composite(spiral(uv, 12.975), color);
    color = composite(spiral(uv, 13.075), color);
    color = composite(spiral(uv, 13.175), color);
    color = composite(spiral(uv, 13.275), color);
    color = composite(spiral(uv, 13.375), color);
    color = composite(spiral(uv, 13.475), color);
    color = composite(spiral(uv, 13.575), color);
    color = composite(spiral(uv, 13.675), color);
    color = composite(spiral(uv, 13.775), color);
    color = composite(spiral(uv, 13.875), color);
    color = composite(spiral(uv, 13.975), color);
    color = composite(spiral(uv, 14.075), color);
    color = composite(spiral(uv, 14.175), color);
    color = composite(spiral(uv, 14.275), color);
    color = composite(spiral(uv, 14.375), color);
    color = composite(spiral(uv, 14.475), color);
    color = composite(spiral(uv, 14.575), color);
    color = composite(spiral(uv, 14.675), color);
    color = composite(spiral(uv, 14.775), color);
    color = composite(spiral(uv, 14.875), color);
    color = composite(spiral(uv, 14.975), color);
    color = composite(spiral(uv, 15.075), color);
    color = composite(spiral(uv, 15.175), color);
    color = composite(spiral(uv, 15.275), color);
    color = composite(spiral(uv, 15.375), color);
    color = composite(spiral(uv, 15.475), color);
    color = composite(spiral(uv, 15.575), color);
    color = composite(spiral(uv, 15.675), color);
    color = composite(spiral(uv, 15.775), color);
    color = composite(spiral(uv, 15.875), color);
    color = composite(spiral(uv, 15.975), color);
    color = composite(spiral(uv, 16.075), color);
    color = composite(spiral(uv, 16.175), color);
    color = composite(spiral(uv, 16.275), color);
    color = composite(spiral(uv, 16.375), color);
    color = composite(spiral(uv, 16.475), color);
    color = composite(spiral(uv, 16.575), color);
    color = composite(spiral(uv, 16.675), color);
    color = composite(spiral(uv, 16.775), color);
    color = composite(spiral(uv, 16.875), color);
    color = composite(spiral(uv, 16.975), color);
    color = composite(spiral(uv, 17.075), color);
    color = composite(spiral(uv, 17.175), color);
    color = composite(spiral(uv, 17.275), color);
    color = composite(spiral(uv, 17.375), color);
    color = composite(spiral(uv, 17.475), color);
    color = composite(spiral(uv, 17.575), color);
    color = composite(spiral(uv, 17.675), color);
    color = composite(spiral(uv, 17.775), color);
    color = composite(spiral(uv, 17.875), color);
    color = composite(spiral(uv, 17.975), color);
    color = composite(spiral(uv, 18.075), color);
    color = composite(spiral(uv, 18.175), color);
    color = composite(spiral(uv, 18.275), color);
    color = composite(spiral(uv, 18.375), color);
    color = composite(spiral(uv, 18.475), color);
    color = composite(spiral(uv, 18.575), color);
    color = composite(spiral(uv, 18.675), color);
    color = composite(spiral(uv, 18.775), color);
    color = composite(spiral(uv, 18.875), color);
    color = composite(spiral(uv, 18.975), color);
    color = composite(spiral(uv, 19.075), color);
    color = composite(spiral(uv, 19.175), color);
    color = composite(spiral(uv, 19.275), color);
    color = composite(spiral(uv, 19.375), color);
    color = composite(spiral(uv, 19.475), color);
    color = composite(spiral(uv, 19.575), color);
    color = composite(spiral(uv, 19.675), color);
    color = composite(spiral(uv, 19.775), color);
    color = composite(spiral(uv, 19.875), color);
    color = composite(spiral(uv, 19.975), color);
    color = composite(spiral(uv, 20.075), color);
    color = composite(spiral(uv, 20.175), color);
    color = composite(spiral(uv, 20.275), color);
    color = composite(spiral(uv, 20.375), color);
    color = composite(spiral(uv, 20.475), color);
    color = composite(spiral(uv, 20.575), color);
    color = composite(spiral(uv, 20.675), color);
    color = composite(spiral(uv, 20.775), color);
    color = composite(spiral(uv, 20.875), color);
    color = composite(spiral(uv, 20.975), color);
    color = composite(spiral(uv, 21.075), color);
    color = composite(spiral(uv, 21.175), color);
    color = composite(spiral(uv, 21.275), color);
    color = composite(spiral(uv, 21.375), color);
    color = composite(spiral(uv, 21.475), color);
    color = composite(spiral(uv, 21.575), color);
    color = composite(spiral(uv, 21.675), color);
    color = composite(spiral(uv, 21.775), color);
    color = composite(spiral(uv, 21.875), color);
    color = composite(spiral(uv, 21.975), color);
    color = composite(spiral(uv, 22.075), color);
    color = composite(spiral(uv, 22.175), color);
    color = composite(spiral(uv, 22.275), color);
    color = composite(spiral(uv, 22.375), color);
    color = composite(spiral(uv, 22.475), color);
    color = composite(spiral(uv, 22.575), color);
    color = composite(spiral(uv, 22.675), color);
    color = composite(spiral(uv, 22.775), color);
    color = composite(spiral(uv, 22.875), color);
    color = composite(spiral(uv, 22.975), color);
    color = composite(spiral(uv, 23.075), color);
    color = composite(spiral(uv, 23.175), color);
    color = composite(spiral(uv, 23.275), color);
    color = composite(spiral(uv, 23.375), color);
    color = composite(spiral(uv, 23.475), color);
    color = composite(spiral(uv, 23.575), color);
    color = composite(spiral(uv, 23.675), color);
    color = composite(spiral(uv, 23.775), color);
    color = composite(spiral(uv, 23.875), color);
    color = composite(spiral(uv, 23.975), color);
    color = composite(spiral(uv, 24.075), color);
    color = composite(spiral(uv, 24.175), color);
    color = composite(spiral(uv, 24.275), color);
    color = composite(spiral(uv, 24.375), color);
    color = composite(spiral(uv, 24.475), color);
    color = composite(spiral(uv, 24.575), color);
    color = composite(spiral(uv, 24.675), color);
    color = composite(spiral(uv, 24.775), color);
    color = composite(spiral(uv, 24.875), color);
    color = composite(spiral(uv, 24.975), color);
    color = composite(spiral(uv, 25.075), color);
    color = composite(spiral(uv, 25.175), color);
    color = composite(spiral(uv, 25.275), color);
    color = composite(spiral(uv, 25.375), color);
    color = composite(spiral(uv, 25.475), color);
    color = composite(spiral(uv, 25.575), color);
    color = composite(spiral(uv, 25.675), color);
    color = composite(spiral(uv, 25.775), color);
    color = composite(spiral(uv, 25.875), color);
    color = composite(spiral(uv, 25.975), color);
    color = composite(spiral(uv, 26.075), color);
    color = composite(spiral(uv, 26.175), color);
    color = composite(spiral(uv, 26.275), color);
    color = composite(spiral(uv, 26.375), color);
    color = composite(spiral(uv, 26.475), color);
    color = composite(spiral(uv, 26.575), color);
    color = composite(spiral(uv, 26.675), color);
    color = composite(spiral(uv, 26.775), color);
    color = composite(spiral(uv, 26.875), color);
    color = composite(spiral(uv, 26.975), color);
    color = composite(spiral(uv, 27.075), color);
    color = composite(spiral(uv, 27.175), color);
    color = composite(spiral(uv, 27.275), color);
    color = composite(spiral(uv, 27.375), color);
    color = composite(spiral(uv, 27.475), color);
    color = composite(spiral(uv, 27.575), color);
    color = composite(spiral(uv, 27.675), color);
    color = composite(spiral(uv, 27.775), color);
    color = composite(spiral(uv, 27.875), color);
    color = composite(spiral(uv, 27.975), color);
    color = composite(spiral(uv, 28.075), color);
    color = composite(spiral(uv, 28.175), color);
    color = composite(spiral(uv, 28.275), color);
    color = composite(spiral(uv, 28.375), color);
    color = composite(spiral(uv, 28.475), color);
    color = composite(spiral(uv, 28.575), color);
    color = composite(spiral(uv, 28.675), color);
    color = composite(spiral(uv, 28.775), color);
    color = composite(spiral(uv, 28.875), color);
    color = composite(spiral(uv, 28.975), color);
    color = composite(spiral(uv, 29.075), color);
    color = composite(spiral(uv, 29.175), color);
    color = composite(spiral(uv, 29.275), color);
    color = composite(spiral(uv, 29.375), color);
    color = composite(spiral(uv, 29.475), color);
    color = composite(spiral(uv, 29.575), color);
    color = composite(spiral(uv, 29.675), color);
    color = composite(spiral(uv, 29.775), color);
    color = composite(spiral(uv, 29.875), color);
    color = composite(spiral(uv, 29.975), color);

    image_uv /= 0.8;
    image_uv.x -= 0.1;
    if (image_uv.x > 0.0 && image_uv.x < 1.0 && image_uv.y < 1.0) {
        vec4 branchorn_color = texture(u_tex0, image_uv);
        color = composite(branchorn_color, color);
    }

    vec2 watermark_uv = gl_FragCoord.xy / u_resolution.xy * 8.0;
    watermark_uv.x = watermark_uv.x * 0.37;
    vec4 watermark_color = texture(u_tex1, watermark_uv);
    if (watermark_uv.x > 1.0 || watermark_uv.y > 1.0) {
        watermark_color = vec4(0);
    }
    watermark_color = mask(watermark_color, 0.15);
    color = composite (watermark_color, color);

    outColor = color;
}
